(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{407:function(t,_,v){t.exports=v.p+"assets/img/image-20220514214252010.634a1b58.png"},620:function(t,_,v){"use strict";v.r(_);var a=v(42),s=Object(a.a)({},(function(){var t=this,_=t.$createElement,a=t._self._c||_;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"字节码class文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字节码class文件"}},[t._v("#")]),t._v(" 字节码Class文件")]),t._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#class文件结构"}},[t._v("Class文件结构")])]),a("li",[a("a",{attrs:{href:"#常量池"}},[t._v("常量池")])])])]),a("p"),t._v(" "),a("h2",{attrs:{id:"class文件结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#class文件结构"}},[t._v("#")]),t._v(" Class文件结构")]),t._v(" "),a("p",[t._v("任何一个class文件都对应着唯一的一个类或接口的定义信息。")]),t._v(" "),a("p",[t._v("class文件不需要以磁盘文件的形式存在，可以动态生成，也可以通过网络传输到类加载器种。")]),t._v(" "),a("p",[t._v("Java字节码是由"),a("code",[t._v("单字节的指令")]),t._v("组成的，也就是"),a("code",[t._v("一个byte（8bit）")]),t._v("组成，所以理论上最多只能有256（2^8）个指令操作码（opcode）。实际上到目前为止，Java规范里只使用了200个左右的操作码，"),a("br"),t._v("\n字节码文件是十六进制文件，可以使用nodepad++打开即可。")]),t._v(" "),a("p",[t._v("Class文件是一组以8个字节为基础单位的二进制流，各个数据项目严格按照顺序紧凑的排列在文件中，中间没有添加任何分隔符。当遇到需要占用8个字节以上空间的数据项时，则会按照高位在前（BE）的方式分割成若干个8个字节进行存储。")]),t._v(" "),a("h2",{attrs:{id:"常量池"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常量池"}},[t._v("#")]),t._v(" 常量池")]),t._v(" "),a("p",[t._v("Class文件的资源仓库。")]),t._v(" "),a("p",[t._v("在Class文件中，紧随主、次版本号之后。其中常量数量不固定，所以在常量池入口放置一个u2类型的数据表示常量池容量计数值（Constant_pool_count），从1开始计数。若某些场景下需要表示“不引用任何一个常量池项目”则计数值使用0。")]),t._v(" "),a("p",[t._v("常量池主要存放两大类：字面量（Literal）、符号引用（Symbolic References）。")]),t._v(" "),a("p",[t._v("字面量：通常意义的常量，例如文本字符串、被声明为final的常量值等。")]),t._v(" "),a("p",[t._v("符号引用主要包括以下几类：")]),t._v(" "),a("ol",[a("li",[t._v("被模块导出或开放的包")]),t._v(" "),a("li",[t._v("类和接口的全限定名")]),t._v(" "),a("li",[t._v("字段的名称和描述符")]),t._v(" "),a("li",[t._v("方法的名称和描述符")]),t._v(" "),a("li",[t._v("方法句柄和方法类型")]),t._v(" "),a("li",[t._v("动态调用点和动态常量")])]),t._v(" "),a("p",[t._v("当JVM做类加载时，会从常量池中获取符号引用，再在类创建或运行时去解析、翻译到具体的内存地址之中。")]),t._v(" "),a("p",[t._v("常量池中每一项常量都是一个表，共有17种类型，表结构的第一位用u1类型的标志位代表当前属于哪种常量类型。")]),t._v(" "),a("p",[a("img",{attrs:{src:v(407),alt:"image-20220514214252010"}})]),t._v(" "),a("h4",{attrs:{id:"constant-class-info"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#constant-class-info"}},[t._v("#")]),t._v(" "),a("code",[t._v("CONSTANT_Class_info")])]),t._v(" "),a("p",[t._v("代表一个类或者接口的符号引用")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("数量")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("u1")]),t._v(" "),a("td",[t._v("tag（标志位，用于区分常量类型）")]),t._v(" "),a("td",[t._v("1")])]),t._v(" "),a("tr",[a("td",[t._v("u2")]),t._v(" "),a("td",[t._v("name_index（常量池的索引值，指向一个CONSTANT_Utf8_info类型常量，代表类的全限定名）")]),t._v(" "),a("td",[t._v("1")])])])]),t._v(" "),a("h4",{attrs:{id:"constant-utf8-info"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#constant-utf8-info"}},[t._v("#")]),t._v(" CONSTANT_Utf8_info")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("数量")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("u1")]),t._v(" "),a("td",[t._v("tag")]),t._v(" "),a("td",[t._v("1")])]),t._v(" "),a("tr",[a("td",[t._v("u2")]),t._v(" "),a("td",[t._v("length（表示UTF-8编码的字符串长度是多少字节）")]),t._v(" "),a("td",[t._v("1")])]),t._v(" "),a("tr",[a("td",[t._v("u1")]),t._v(" "),a("td",[t._v("bytes")]),t._v(" "),a("td",[t._v("length")])])])])])}),[],!1,null,null,null);_.default=s.exports}}]);