(window.webpackJsonp=window.webpackJsonp||[]).push([[253],{665:function(s,t,e){"use strict";e.r(t);var v=e(42),l=Object(v.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"mysql用户管理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mysql用户管理"}},[s._v("#")]),s._v(" mysql用户管理")]),s._v(" "),e("p",[s._v("mysql -uroot -proot")]),s._v(" "),e("p",[s._v("MySQL5.7 mysql.user表没有password字段改 authentication_string；")]),s._v(" "),e("p",[s._v("一. 创建用户:\n命令:CREATE USER 'username'@'host' IDENTIFIED BY 'password';")]),s._v(" "),e("p",[s._v("例子: CREATE USER 'dog'@'localhost' IDENTIFIED BY '123456';")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("    CREATE USER 'dog2'@'localhost' IDENTIFIED BY '';\n")])])]),e("p",[s._v("PS：username - 你将创建的用户名,")]),s._v(" "),e("p",[s._v('host - 指定该用户在哪个主机上可以登陆，此处的"localhost"，是指该用户只能在本地登录，不能在另外一台机器上远程登录，如果想远程登录的话，将"localhost"改为"%"，表示在任何一台电脑上都可以登录;也可以指定某台机器可以远程登录;')]),s._v(" "),e("p",[s._v("password - 该用户的登陆密码,密码可以为空,如果为空则该用户可以不需要密码登陆服务器。")]),s._v(" "),e("p",[s._v("二.授权:\n命令:GRANT privileges ON databasename.tablename TO 'username'@'host'")]),s._v(" "),e("p",[s._v("PS: privileges - 用户的操作权限,如SELECT , INSERT , UPDATE 等(详细列表见该文最后面).如果要授予所的权限则使用ALL.;databasename - 数据库名,tablename-表名,如果要授予该用户对所有数据库和表的相应操作权限则可用"),e("em",[s._v("表示, 如")]),s._v(".*.")]),s._v(" "),e("p",[s._v("例子: GRANT SELECT, INSERT ON mq.* TO 'dog'@'localhost';")]),s._v(" "),e("p",[s._v("三.创建用户同时授权\nmysql> grant all privileges on mq.* to test@localhost identified by '1234';\nQuery OK, 0 rows affected, 1 warning (0.00 sec)")]),s._v(" "),e("p",[s._v("mysql> flush privileges;\nQuery OK, 0 rows affected (0.01 sec)")]),s._v(" "),e("p",[s._v("PS:必须执行flush privileges;")]),s._v(" "),e("p",[s._v("否则登录时提示：ERROR 1045 (28000): Access denied for user 'user'@'localhost' (using password: YES )")]),s._v(" "),e("p",[s._v("四.设置与更改用户密码\n命令:SET PASSWORD FOR 'username'@'host' = PASSWORD('newpassword');")]),s._v(" "),e("p",[s._v("例子: SET PASSWORD FOR 'dog2'@'localhost' = PASSWORD(\"dog\");")]),s._v(" "),e("p",[s._v("五.撤销用户权限\n命令: REVOKE privilege ON databasename.tablename FROM 'username'@'host';")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v(" 说明: privilege, databasename, tablename - 同授权部分.\n\n  例子: REVOKE SELECT ON mq.* FROM 'dog2'@'localhost';\n")])])]),e("p",[s._v("PS: 假如你在给用户'dog'@'localhost''授权的时候是这样的(或类似的):GRANT SELECT ON test.user TO 'dog'@'localhost', 则在使用REVOKE SELECT ON "),e("em",[s._v(".")]),s._v(" FROM 'dog'@'localhost';命令并不能撤销该用户对test数据库中user表的SELECT 操作.相反,如果授权使用的是GRANT SELECT ON "),e("em",[s._v(".")]),s._v(" TO 'dog'@'localhost';则REVOKE SELECT ON test.user FROM 'dog'@'localhost';命令也不能撤销该用户对test数据库中user表的Select 权限.")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("  具体信息可以用命令SHOW GRANTS FOR 'dog'@'localhost'; 查看.\n")])])]),e("p",[s._v("六.删除用户\n命令: DROP USER 'username'@'host';")]),s._v(" "),e("p",[s._v("七.查看用户的授权\nmysql> show grants for dog@localhost;\n+---------------------------------------------+\n| Grants for dog@localhost |\n+---------------------------------------------+\n| GRANT USAGE ON "),e("em",[s._v(".")]),s._v(" TO 'dog'@'localhost' |\n| GRANT INSERT ON "),e("code",[s._v("mq")]),s._v(".* TO 'dog'@'localhost' |\n+---------------------------------------------+\n2 rows in set (0.00 sec)")]),s._v(" "),e("p",[s._v("PS:GRANT USAGE:mysql usage权限就是空权限，默认create user的权限，只能连库，啥也不能干")]),s._v(" "),e("p",[s._v("本文转载于: https://www.cnblogs.com/xujishou/p/6306765.html")]),s._v(" "),e("hr"),s._v(" "),e("hr"),s._v(" "),e("p",[s._v("MySql 中添加用户, 新建数据库, 用户授权, 删除用户, 修改密码 (注意每行后边都跟个; 表示一个命令语句结束):")]),s._v(" "),e("ol",[e("li",[s._v("新建用户")])]),s._v(" "),e("p",[s._v("1.1 登录 MYSQL：")]),s._v(" "),e("p",[s._v("@>mysql -u root -p")]),s._v(" "),e("p",[s._v("@> 密码")]),s._v(" "),e("p",[s._v("1.2 创建用户：")]),s._v(" "),e("p",[s._v('mysql> insert into mysql.user(Host,User,Password) values("localhost","test",password("1234"));')]),s._v(" "),e("p",[s._v("这样就创建了一个名为：test 密码为：1234 的用户。")]),s._v(" "),e("p",[s._v('注意：此处的 "localhost"，是指该用户只能在本地登录，不能在另外一台机器上远程登录。如果想远程登录的话，将 "localhost" 改为 "%"，表示在任何一台电脑上都可以登录。也可以指定某台机器可以远程登录。')]),s._v(" "),e("p",[s._v("1.3 然后登录一下：")]),s._v(" "),e("p",[s._v("mysql>exit;")]),s._v(" "),e("p",[s._v("@>mysql -u test -p")]),s._v(" "),e("p",[s._v("@> 输入密码")]),s._v(" "),e("p",[s._v("mysql > 登录成功")]),s._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[s._v("为用户授权")])]),s._v(" "),e("p",[s._v('授权格式：grant 权限 on 数据库.* to 用户名 @登录主机 identified by "密码";')]),s._v(" "),e("p",[s._v("2.1 登录 MYSQL（有 ROOT 权限），这里以 ROOT 身份登录：")]),s._v(" "),e("p",[s._v("@>mysql -u root -p")]),s._v(" "),e("p",[s._v("@> 密码")]),s._v(" "),e("p",[s._v("2.2 首先为用户创建一个数据库 (testDB)：")]),s._v(" "),e("p",[s._v("mysql>create database testDB;")]),s._v(" "),e("p",[s._v("2.3 授权 test 用户拥有 testDB 数据库的所有权限（某个数据库的所有权限）：")]),s._v(" "),e("p",[s._v("mysql>grant all privileges on testDB.* to test@localhost identified by '1234';")]),s._v(" "),e("p",[s._v("mysql>flush privileges;// 刷新系统权限表")]),s._v(" "),e("p",[s._v('格式：grant 权限 on 数据库.* to 用户名 @登录主机 identified by "密码";')]),s._v(" "),e("p",[s._v("2.4 如果想指定部分权限给一用户，可以这样来写:")]),s._v(" "),e("p",[s._v("mysql>grant select,update on testDB.* to test@localhost identified by '1234';")]),s._v(" "),e("p",[s._v("mysql>flush privileges; // 刷新系统权限表")]),s._v(" "),e("p",[s._v("2.5 授权 test 用户拥有所有数据库的某些权限：")]),s._v(" "),e("p",[s._v("mysql>grant select,delete,update,create,drop on "),e("em",[s._v(".")]),s._v(' to test@"%" identified by "1234";')]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v(" //test 用户对所有数据库都有 select,delete,update,create,drop 权限。\n")])])]),e("p",[s._v('//@"%" 表示对所有非本地主机授权，不包括 localhost。（localhost 地址设为 127.0.0.1，如果设为真实的本地地址，不知道是否可以，没有验证。）')]),s._v(" "),e("p",[s._v("// 对 localhost 授权：加上一句 grant all privileges on testDB.* to test@localhost identified by '1234'; 即可。")]),s._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[s._v("删除用户")])]),s._v(" "),e("p",[s._v("@>mysql -u root -p")]),s._v(" "),e("p",[s._v("@> 密码")]),s._v(" "),e("p",[s._v("mysql>Delete FROM user Where User='test' and Host='localhost';")]),s._v(" "),e("p",[s._v("mysql>flush privileges;")]),s._v(" "),e("p",[s._v("mysql>drop database testDB; // 删除用户的数据库")]),s._v(" "),e("p",[s._v("删除账户及权限：>drop user 用户名 @'%';")]),s._v(" "),e("p",[s._v(">drop user 用户名 @ localhost;")]),s._v(" "),e("ol",{attrs:{start:"4"}},[e("li",[s._v("修改指定用户密码")])]),s._v(" "),e("p",[s._v("@>mysql -u root -p")]),s._v(" "),e("p",[s._v("@> 密码")]),s._v(" "),e("p",[s._v('mysql>update mysql.user set password=password(\'新密码\') where User="test" and Host="localhost";')]),s._v(" "),e("p",[s._v("mysql>flush privileges;")]),s._v(" "),e("ol",{attrs:{start:"5"}},[e("li",[s._v("列出所有数据库")])]),s._v(" "),e("p",[s._v("mysql>show database;")]),s._v(" "),e("ol",{attrs:{start:"6"}},[e("li",[s._v("切换数据库")])]),s._v(" "),e("p",[s._v("mysql>use '数据库名';")]),s._v(" "),e("ol",{attrs:{start:"7"}},[e("li",[s._v("列出所有表")])]),s._v(" "),e("p",[s._v("mysql>show tables;")]),s._v(" "),e("ol",{attrs:{start:"8"}},[e("li",[s._v("显示数据表结构")])]),s._v(" "),e("p",[s._v("mysql>describe 表名;")]),s._v(" "),e("ol",{attrs:{start:"9"}},[e("li",[s._v("删除数据库和数据表")])]),s._v(" "),e("p",[s._v("mysql>drop database 数据库名;")]),s._v(" "),e("p",[s._v("mysql>drop table 数据表名;")]),s._v(" "),e("p",[s._v("以上转载于: https://www.cnblogs.com/wanghetao/p/3806888.html")])])}),[],!1,null,null,null);t.default=l.exports}}]);