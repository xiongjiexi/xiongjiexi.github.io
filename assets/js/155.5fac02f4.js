(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{560:function(v,_,t){"use strict";t.r(_);var e=t(42),a=Object(e.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h1",{attrs:{id:"jvm参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jvm参数"}},[v._v("#")]),v._v(" JVM参数")]),v._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#常用的jvm参数设置"}},[v._v("常用的JVM参数设置")]),t("ul",[t("li",[t("a",{attrs:{href:"#java8"}},[v._v("Java8")])]),t("li",[t("a",{attrs:{href:"#java13"}},[v._v("Java13")])])])]),t("li",[t("a",{attrs:{href:"#q-a"}},[v._v("Q&A")])]),t("li",[t("a",{attrs:{href:"#资料参考"}},[v._v("资料参考")])])])]),t("p"),v._v(" "),t("h2",{attrs:{id:"常用的jvm参数设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用的jvm参数设置"}},[v._v("#")]),v._v(" 常用的JVM参数设置")]),v._v(" "),t("p",[v._v("以下分版本列出了JVM常用的参数设置（分为Java8、Java13）")]),v._v(" "),t("h3",{attrs:{id:"java8"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#java8"}},[v._v("#")]),v._v(" Java8")]),v._v(" "),t("table",[t("thead",[t("tr",[t("th",[v._v("参数")]),v._v(" "),t("th",[v._v("意义")])])]),v._v(" "),t("tbody",[t("tr",[t("td",[v._v("-verbose:gc")]),v._v(" "),t("td",[v._v("打印 GC 日志")])]),v._v(" "),t("tr",[t("td",[v._v("PrintGCDetails")]),v._v(" "),t("td",[v._v("打印详细 GC 日志")])]),v._v(" "),t("tr",[t("td",[v._v("PrintGCDateStamps")]),v._v(" "),t("td",[v._v("系统时间，更加可读，PrintGCTimeStamps 是 JVM 启动时间")])]),v._v(" "),t("tr",[t("td",[v._v("PrintGCApplicationStoppedTime")]),v._v(" "),t("td",[v._v("打印 STW 时间")])]),v._v(" "),t("tr",[t("td",[v._v("PrintTenuringDistribution")]),v._v(" "),t("td",[v._v("打印对象年龄分布，对调优 MaxTenuringThreshold 参数帮助很大")])]),v._v(" "),t("tr",[t("td",[v._v("loggc")]),v._v(" "),t("td",[v._v("将以上 GC 内容输出到文件中")])])])]),v._v(" "),t("p",[v._v("OOM相关参数：")]),v._v(" "),t("table",[t("thead",[t("tr",[t("th",[v._v("参数")]),v._v(" "),t("th",[v._v("意义")])])]),v._v(" "),t("tbody",[t("tr",[t("td",[v._v("HeapDumpOnOutOfMemoryError")]),v._v(" "),t("td",[v._v("OOM 时 Dump 信息，非常有用")])]),v._v(" "),t("tr",[t("td",[v._v("HeapDumpPath")]),v._v(" "),t("td",[v._v("Dump 文件保存路径")])]),v._v(" "),t("tr",[t("td",[v._v("ErrorFile")]),v._v(" "),t("td",[v._v("错误日志存放路径")])]),v._v(" "),t("tr",[t("td",[v._v("OmitStackTraceInFastThrow")]),v._v(" "),t("td",[v._v("缩简日志输出，默认开启的。"),t("br"),v._v("开启时，如果你多次发生了空指针异常，将只会打印java.lang.NullPointerException，而不会打印堆栈信息。"),t("br"),v._v("通常需要修改为关闭。")])])])]),v._v(" "),t("h3",{attrs:{id:"java13"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#java13"}},[v._v("#")]),v._v(" Java13")]),v._v(" "),t("blockquote",[t("p",[v._v("从Java9开始移除了40多个GC日志相关的参数，所以相关配置变化很大。")])]),v._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[v._v('JAVA_OPT_LOG=" -verbose:gc"\nJAVA_OPT_LOG="${JAVA_OPT_LOG} -Xlog:gc,gc+ref=debug,gc+heap=debug,gc+age=trace:file=${LOG_DIR}/gc_%p.log:tags,uptime,time,level"\nJAVA_OPT_LOG="${JAVA_OPT_LOG} -Xlog:safepoint:file=${LOG_DIR}/safepoint_%p.log:tags,uptime,time,level"\nJAVA_OPT_OOM=" -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=${LOG_DIR} -XX:ErrorFile=${LOG_DIR}/hs_error_pid%p.log "\nJAVA_OPT="${JAVA_OPT_LOG} ${JAVA_OPT_OOM}"\nJAVA_OPT="${JAVA_OPT} -XX:-OmitStackTraceInFastThrow"\necho $JAVA_OPT\n')])])]),t("h2",{attrs:{id:"q-a"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#q-a"}},[v._v("#")]),v._v(" Q&A")]),v._v(" "),t("ul",[t("li",[v._v("为什么建议将Xmx和Xms设置成一样的？")]),v._v(" "),t("li",[v._v("如果各个区参数未设置好，存在动态扩容问题是个什么场景？")]),v._v(" "),t("li",[v._v("MinorGC和MajorGC跟youngGC和FullGC的区别？")]),v._v(" "),t("li",[v._v("JVM中如何设置参数？生产上做过哪些参数设置？")]),v._v(" "),t("li",[v._v("做过哪些JVM参数优化？")])]),v._v(" "),t("p",[t("strong",[v._v("内存分配参数：")])]),v._v(" "),t("ul",[t("li",[v._v("Xms")]),v._v(" "),t("li",[v._v("Xmx")]),v._v(" "),t("li",[v._v("Xmn")]),v._v(" "),t("li",[v._v("PermSize/MetaspaceSize")]),v._v(" "),t("li",[v._v("MaxPermSize/MetaspaceSize")]),v._v(" "),t("li",[v._v("Xss")])]),v._v(" "),t("p",[t("strong",[v._v("GC策略参数：")])]),v._v(" "),t("ul",[t("li",[v._v("SurvivorRatio")]),v._v(" "),t("li",[v._v("PretenureSzieThreshold")]),v._v(" "),t("li",[v._v("MaxTenuringThreshold")]),v._v(" "),t("li",[v._v("ParallelRefProcEnabled")]),v._v(" "),t("li",[v._v("ParallelGCThreads")]),v._v(" "),t("li",[v._v("UseSerialGC")]),v._v(" "),t("li",[v._v("UseParNewGC")]),v._v(" "),t("li",[v._v("CMSParallelRemarkEnabled")]),v._v(" "),t("li",[v._v("UseParallelGC")]),v._v(" "),t("li",[v._v("UseAdaptiveSizePolicy")]),v._v(" "),t("li",[v._v("MaxTimeRatio")]),v._v(" "),t("li",[v._v("MaxGCPauseMillis（常和G1配合使用）")]),v._v(" "),t("li",[v._v("UseParallelOldGC")]),v._v(" "),t("li",[v._v("UseConcMarkSweepGC")]),v._v(" "),t("li",[v._v("CMSInitiatingOccupancyFraction")]),v._v(" "),t("li",[v._v("UseCMSInitiatingOccupancyOnly")]),v._v(" "),t("li",[v._v("UseCMSCompactAtFullCollection")]),v._v(" "),t("li",[v._v("CMSFullGCsBeforeCompaction")]),v._v(" "),t("li",[v._v("CMSClassUnloadingEnabled")]),v._v(" "),t("li",[v._v("UseG1GC")]),v._v(" "),t("li",[v._v("DisableExplicitGC")])]),v._v(" "),t("p",[v._v("G1配置参数：")]),v._v(" "),t("ul",[t("li",[v._v("G1NewSizePercent")]),v._v(" "),t("li",[v._v("G1MaxNewSziePercent")]),v._v(" "),t("li",[v._v("G1HeapRegionSize")]),v._v(" "),t("li",[v._v("ConcGCThreads")]),v._v(" "),t("li",[v._v("InitiatingHeapOccupancyPercent")]),v._v(" "),t("li",[v._v("G1HeapWastePercent")]),v._v(" "),t("li",[v._v("G1MixedGCCountTarget")]),v._v(" "),t("li",[v._v("G1PrintRegionLivenessInfo")]),v._v(" "),t("li",[v._v("G1ReservePercent")]),v._v(" "),t("li",[v._v("G1SummarizeRSetStats")]),v._v(" "),t("li",[v._v("G1TraceConcRefinement")]),v._v(" "),t("li",[v._v("GCTimeRatio")])]),v._v(" "),t("p",[t("strong",[v._v("GC日志参数：")])]),v._v(" "),t("ul",[t("li",[v._v("Xloggc")]),v._v(" "),t("li",[v._v("UseGCLogFileRotation")]),v._v(" "),t("li",[v._v("NumberOfGCLogFiles")]),v._v(" "),t("li",[v._v("GCLogFileSize")]),v._v(" "),t("li",[v._v("PrintGCDetails")]),v._v(" "),t("li",[v._v("PrintGCDateStamps")]),v._v(" "),t("li",[v._v("PrintTenuringDistribution")]),v._v(" "),t("li",[v._v("PrintGCApplicationStoppedTime")]),v._v(" "),t("li",[v._v("PrintHeapAtGC")])]),v._v(" "),t("p",[t("strong",[v._v("异常参数：")])]),v._v(" "),t("ul",[t("li",[v._v("HeapDumpOnOutOfMemoryError(-XX:+HeapDumpOnOutOfMemoryError)")]),v._v(" "),t("li",[v._v("HeapDumpPath(-XX:HeapDumpPath=/data/dump/jvm.dump)")])]),v._v(" "),t("p",[t("strong",[v._v("其他：")])]),v._v(" "),t("ul",[t("li",[v._v("server(-server)")]),v._v(" "),t("li",[v._v("TieredCompilation(-XX:+TieredCompilation)")])]),v._v(" "),t("h2",{attrs:{id:"资料参考"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#资料参考"}},[v._v("#")]),v._v(" 资料参考")]),v._v(" "),t("p",[t("a",{attrs:{href:"https://www.cnblogs.com/jmcui/p/12051328.html",target:"_blank",rel:"noopener noreferrer"}},[v._v("jvm参数设置参考"),t("OutboundLink")],1)])])}),[],!1,null,null,null);_.default=a.exports}}]);