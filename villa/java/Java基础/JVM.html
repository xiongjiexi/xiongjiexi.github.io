<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JVM入门与进阶 | 海边别墅</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="my villa">
    
    <link rel="preload" href="/assets/css/0.styles.bf0cee12.css" as="style"><link rel="preload" href="/assets/js/app.fc976789.js" as="script"><link rel="preload" href="/assets/js/3.5332180f.js" as="script"><link rel="preload" href="/assets/js/2.2c3855b5.js" as="script"><link rel="preload" href="/assets/js/25.9a8e54ce.js" as="script"><link rel="prefetch" href="/assets/js/10.bf34cd1b.js"><link rel="prefetch" href="/assets/js/100.8aacb1b3.js"><link rel="prefetch" href="/assets/js/101.d16485ff.js"><link rel="prefetch" href="/assets/js/102.209a7386.js"><link rel="prefetch" href="/assets/js/103.de933d22.js"><link rel="prefetch" href="/assets/js/104.a79e44b5.js"><link rel="prefetch" href="/assets/js/105.8b55aab2.js"><link rel="prefetch" href="/assets/js/106.35693c50.js"><link rel="prefetch" href="/assets/js/107.45eb81b5.js"><link rel="prefetch" href="/assets/js/108.4a3cfed7.js"><link rel="prefetch" href="/assets/js/109.8f89dfe0.js"><link rel="prefetch" href="/assets/js/11.7c724610.js"><link rel="prefetch" href="/assets/js/110.24464d1e.js"><link rel="prefetch" href="/assets/js/111.7d3eb077.js"><link rel="prefetch" href="/assets/js/112.a27820ee.js"><link rel="prefetch" href="/assets/js/113.b9cd9c83.js"><link rel="prefetch" href="/assets/js/114.6f6adfd7.js"><link rel="prefetch" href="/assets/js/115.3958c0f8.js"><link rel="prefetch" href="/assets/js/116.fdfff357.js"><link rel="prefetch" href="/assets/js/117.a8b4f147.js"><link rel="prefetch" href="/assets/js/118.70544756.js"><link rel="prefetch" href="/assets/js/119.e1a6686b.js"><link rel="prefetch" href="/assets/js/12.6287def6.js"><link rel="prefetch" href="/assets/js/120.f64576f7.js"><link rel="prefetch" href="/assets/js/121.c7bd8c94.js"><link rel="prefetch" href="/assets/js/122.3b09771b.js"><link rel="prefetch" href="/assets/js/123.0fe428c3.js"><link rel="prefetch" href="/assets/js/124.ad3ab55a.js"><link rel="prefetch" href="/assets/js/125.57ec6c12.js"><link rel="prefetch" href="/assets/js/126.22692bcb.js"><link rel="prefetch" href="/assets/js/127.46fac4ef.js"><link rel="prefetch" href="/assets/js/128.8c34db39.js"><link rel="prefetch" href="/assets/js/129.2f653c47.js"><link rel="prefetch" href="/assets/js/13.3ff29759.js"><link rel="prefetch" href="/assets/js/130.469f0f69.js"><link rel="prefetch" href="/assets/js/131.d885d353.js"><link rel="prefetch" href="/assets/js/132.595a23d6.js"><link rel="prefetch" href="/assets/js/133.03d9e82c.js"><link rel="prefetch" href="/assets/js/134.b9a7bf70.js"><link rel="prefetch" href="/assets/js/135.428e0bb3.js"><link rel="prefetch" href="/assets/js/136.242eb440.js"><link rel="prefetch" href="/assets/js/137.f5ec6d40.js"><link rel="prefetch" href="/assets/js/138.8f9c67a3.js"><link rel="prefetch" href="/assets/js/139.7897e515.js"><link rel="prefetch" href="/assets/js/14.17adcef3.js"><link rel="prefetch" href="/assets/js/140.6ccd9e45.js"><link rel="prefetch" href="/assets/js/141.4d79db17.js"><link rel="prefetch" href="/assets/js/142.242a5adf.js"><link rel="prefetch" href="/assets/js/143.6fc3c2e6.js"><link rel="prefetch" href="/assets/js/144.c52773ba.js"><link rel="prefetch" href="/assets/js/145.269c6fd0.js"><link rel="prefetch" href="/assets/js/146.b09a31da.js"><link rel="prefetch" href="/assets/js/147.9abc90ec.js"><link rel="prefetch" href="/assets/js/148.ad255c86.js"><link rel="prefetch" href="/assets/js/149.0571e435.js"><link rel="prefetch" href="/assets/js/15.e468c5f2.js"><link rel="prefetch" href="/assets/js/150.1e240902.js"><link rel="prefetch" href="/assets/js/151.ff4fac2c.js"><link rel="prefetch" href="/assets/js/152.d9ef8c1c.js"><link rel="prefetch" href="/assets/js/153.0fc31d6e.js"><link rel="prefetch" href="/assets/js/154.596cfa8b.js"><link rel="prefetch" href="/assets/js/155.5fac02f4.js"><link rel="prefetch" href="/assets/js/156.b8d6659f.js"><link rel="prefetch" href="/assets/js/157.d1c04df7.js"><link rel="prefetch" href="/assets/js/158.688a3c20.js"><link rel="prefetch" href="/assets/js/159.2371d54c.js"><link rel="prefetch" href="/assets/js/16.7d1ee355.js"><link rel="prefetch" href="/assets/js/160.4cd3803a.js"><link rel="prefetch" href="/assets/js/161.254ab8b4.js"><link rel="prefetch" href="/assets/js/162.fbf1d9e5.js"><link rel="prefetch" href="/assets/js/163.41a0b4c3.js"><link rel="prefetch" href="/assets/js/164.ee9bd7fc.js"><link rel="prefetch" href="/assets/js/165.49ed83c0.js"><link rel="prefetch" href="/assets/js/166.8e30a350.js"><link rel="prefetch" href="/assets/js/167.b55f1332.js"><link rel="prefetch" href="/assets/js/168.3a2b3375.js"><link rel="prefetch" href="/assets/js/169.7ecbdc6a.js"><link rel="prefetch" href="/assets/js/17.386989cf.js"><link rel="prefetch" href="/assets/js/170.fea8d73e.js"><link rel="prefetch" href="/assets/js/171.c618f7d8.js"><link rel="prefetch" href="/assets/js/172.89fe248d.js"><link rel="prefetch" href="/assets/js/173.5fd8d70b.js"><link rel="prefetch" href="/assets/js/174.d3203146.js"><link rel="prefetch" href="/assets/js/175.b26eb983.js"><link rel="prefetch" href="/assets/js/176.b25bfb76.js"><link rel="prefetch" href="/assets/js/177.fd86dc58.js"><link rel="prefetch" href="/assets/js/178.39f11189.js"><link rel="prefetch" href="/assets/js/179.5e8cd3d8.js"><link rel="prefetch" href="/assets/js/18.cda7758f.js"><link rel="prefetch" href="/assets/js/180.43ddd85a.js"><link rel="prefetch" href="/assets/js/181.e206ae8c.js"><link rel="prefetch" href="/assets/js/182.01ee48f8.js"><link rel="prefetch" href="/assets/js/183.596ca9a0.js"><link rel="prefetch" href="/assets/js/184.02a93e19.js"><link rel="prefetch" href="/assets/js/185.ab8366a7.js"><link rel="prefetch" href="/assets/js/186.aea10941.js"><link rel="prefetch" href="/assets/js/187.eb6b1a47.js"><link rel="prefetch" href="/assets/js/188.e8700091.js"><link rel="prefetch" href="/assets/js/189.22a936ca.js"><link rel="prefetch" href="/assets/js/19.c3eeec56.js"><link rel="prefetch" href="/assets/js/190.5fe0c4a3.js"><link rel="prefetch" href="/assets/js/191.ec2c1be1.js"><link rel="prefetch" href="/assets/js/192.450f54fb.js"><link rel="prefetch" href="/assets/js/193.847466d4.js"><link rel="prefetch" href="/assets/js/194.0f1ce61f.js"><link rel="prefetch" href="/assets/js/195.97be31a2.js"><link rel="prefetch" href="/assets/js/196.4521227b.js"><link rel="prefetch" href="/assets/js/197.2f595688.js"><link rel="prefetch" href="/assets/js/198.49bc852e.js"><link rel="prefetch" href="/assets/js/199.d1d1f9ce.js"><link rel="prefetch" href="/assets/js/20.a6011a86.js"><link rel="prefetch" href="/assets/js/200.2119cb50.js"><link rel="prefetch" href="/assets/js/201.2ceab5c8.js"><link rel="prefetch" href="/assets/js/202.add2b9bc.js"><link rel="prefetch" href="/assets/js/203.88667144.js"><link rel="prefetch" href="/assets/js/204.5ef3a9fd.js"><link rel="prefetch" href="/assets/js/205.ef0be082.js"><link rel="prefetch" href="/assets/js/206.9faab628.js"><link rel="prefetch" href="/assets/js/207.e105cfda.js"><link rel="prefetch" href="/assets/js/208.f8dd44c9.js"><link rel="prefetch" href="/assets/js/209.b629c0a1.js"><link rel="prefetch" href="/assets/js/21.d391d09f.js"><link rel="prefetch" href="/assets/js/210.64f75f1b.js"><link rel="prefetch" href="/assets/js/211.1c9fc5ea.js"><link rel="prefetch" href="/assets/js/212.32d95036.js"><link rel="prefetch" href="/assets/js/213.3e73fe14.js"><link rel="prefetch" href="/assets/js/214.caaffc8d.js"><link rel="prefetch" href="/assets/js/215.09f0f1d1.js"><link rel="prefetch" href="/assets/js/216.6331878b.js"><link rel="prefetch" href="/assets/js/217.fddf8575.js"><link rel="prefetch" href="/assets/js/218.b3168f66.js"><link rel="prefetch" href="/assets/js/219.8d9fbc5a.js"><link rel="prefetch" href="/assets/js/22.0b7326c4.js"><link rel="prefetch" href="/assets/js/220.7a35e7d8.js"><link rel="prefetch" href="/assets/js/221.f00e29e0.js"><link rel="prefetch" href="/assets/js/222.3254cb33.js"><link rel="prefetch" href="/assets/js/223.03062b38.js"><link rel="prefetch" href="/assets/js/224.50fbd2be.js"><link rel="prefetch" href="/assets/js/225.33bf8414.js"><link rel="prefetch" href="/assets/js/226.defdd7a5.js"><link rel="prefetch" href="/assets/js/227.8cdbbc29.js"><link rel="prefetch" href="/assets/js/228.4c998b77.js"><link rel="prefetch" href="/assets/js/229.5c46170e.js"><link rel="prefetch" href="/assets/js/23.24785a94.js"><link rel="prefetch" href="/assets/js/230.c0f32223.js"><link rel="prefetch" href="/assets/js/231.86333d04.js"><link rel="prefetch" href="/assets/js/232.4409ae51.js"><link rel="prefetch" href="/assets/js/233.43365886.js"><link rel="prefetch" href="/assets/js/234.5494eb0a.js"><link rel="prefetch" href="/assets/js/235.1b6ed551.js"><link rel="prefetch" href="/assets/js/236.0c82f13a.js"><link rel="prefetch" href="/assets/js/237.cc9f4724.js"><link rel="prefetch" href="/assets/js/238.71df2e01.js"><link rel="prefetch" href="/assets/js/239.e4485a42.js"><link rel="prefetch" href="/assets/js/24.ddb53e13.js"><link rel="prefetch" href="/assets/js/240.87aa969e.js"><link rel="prefetch" href="/assets/js/241.af983f20.js"><link rel="prefetch" href="/assets/js/242.679815f8.js"><link rel="prefetch" href="/assets/js/243.04a4dc12.js"><link rel="prefetch" href="/assets/js/244.ea294da3.js"><link rel="prefetch" href="/assets/js/245.b50c2c99.js"><link rel="prefetch" href="/assets/js/246.49805d8c.js"><link rel="prefetch" href="/assets/js/247.db0f1af3.js"><link rel="prefetch" href="/assets/js/248.7ffb3fec.js"><link rel="prefetch" href="/assets/js/249.1d152fdb.js"><link rel="prefetch" href="/assets/js/250.5ad78899.js"><link rel="prefetch" href="/assets/js/251.a88c7f0c.js"><link rel="prefetch" href="/assets/js/252.4f390e80.js"><link rel="prefetch" href="/assets/js/253.6196e92b.js"><link rel="prefetch" href="/assets/js/254.4378b69f.js"><link rel="prefetch" href="/assets/js/255.c28f941d.js"><link rel="prefetch" href="/assets/js/256.ce4acf76.js"><link rel="prefetch" href="/assets/js/257.031659a3.js"><link rel="prefetch" href="/assets/js/258.a2a90923.js"><link rel="prefetch" href="/assets/js/259.21986be5.js"><link rel="prefetch" href="/assets/js/26.a7812065.js"><link rel="prefetch" href="/assets/js/260.77bc131b.js"><link rel="prefetch" href="/assets/js/261.a1241302.js"><link rel="prefetch" href="/assets/js/262.4e5d4a1f.js"><link rel="prefetch" href="/assets/js/263.493bd86b.js"><link rel="prefetch" href="/assets/js/264.22771452.js"><link rel="prefetch" href="/assets/js/265.c95e1b11.js"><link rel="prefetch" href="/assets/js/266.3e1a759d.js"><link rel="prefetch" href="/assets/js/267.298de39b.js"><link rel="prefetch" href="/assets/js/268.2370655e.js"><link rel="prefetch" href="/assets/js/269.57ae6eb3.js"><link rel="prefetch" href="/assets/js/27.f721d075.js"><link rel="prefetch" href="/assets/js/270.581dab4d.js"><link rel="prefetch" href="/assets/js/271.d93d9430.js"><link rel="prefetch" href="/assets/js/272.04194375.js"><link rel="prefetch" href="/assets/js/273.1128293f.js"><link rel="prefetch" href="/assets/js/274.8f89ddd4.js"><link rel="prefetch" href="/assets/js/275.34814af8.js"><link rel="prefetch" href="/assets/js/276.f0719fca.js"><link rel="prefetch" href="/assets/js/277.00c81e06.js"><link rel="prefetch" href="/assets/js/278.d7ee96ae.js"><link rel="prefetch" href="/assets/js/279.f70a87e0.js"><link rel="prefetch" href="/assets/js/28.ebd2c22c.js"><link rel="prefetch" href="/assets/js/280.b69ead4f.js"><link rel="prefetch" href="/assets/js/281.8bf9c537.js"><link rel="prefetch" href="/assets/js/282.445bdbf9.js"><link rel="prefetch" href="/assets/js/283.7fdb6eb2.js"><link rel="prefetch" href="/assets/js/284.781b0ed0.js"><link rel="prefetch" href="/assets/js/285.5465eb96.js"><link rel="prefetch" href="/assets/js/286.3dd4ca2e.js"><link rel="prefetch" href="/assets/js/287.37601d8a.js"><link rel="prefetch" href="/assets/js/288.38aa1738.js"><link rel="prefetch" href="/assets/js/289.acb10f33.js"><link rel="prefetch" href="/assets/js/29.2bcb3ebb.js"><link rel="prefetch" href="/assets/js/290.1a79bd0b.js"><link rel="prefetch" href="/assets/js/291.d690ed50.js"><link rel="prefetch" href="/assets/js/292.c5150288.js"><link rel="prefetch" href="/assets/js/293.33b817fd.js"><link rel="prefetch" href="/assets/js/294.c9726f15.js"><link rel="prefetch" href="/assets/js/295.bca9a9e2.js"><link rel="prefetch" href="/assets/js/296.c825821d.js"><link rel="prefetch" href="/assets/js/297.20c550c6.js"><link rel="prefetch" href="/assets/js/298.34986349.js"><link rel="prefetch" href="/assets/js/299.34865824.js"><link rel="prefetch" href="/assets/js/30.336f3229.js"><link rel="prefetch" href="/assets/js/300.b8ef4765.js"><link rel="prefetch" href="/assets/js/301.b8ba7819.js"><link rel="prefetch" href="/assets/js/302.b2a2e19c.js"><link rel="prefetch" href="/assets/js/303.3ba1338b.js"><link rel="prefetch" href="/assets/js/304.4e4645c5.js"><link rel="prefetch" href="/assets/js/305.01eab767.js"><link rel="prefetch" href="/assets/js/306.8b74e331.js"><link rel="prefetch" href="/assets/js/307.63043d43.js"><link rel="prefetch" href="/assets/js/308.b5c25eca.js"><link rel="prefetch" href="/assets/js/31.dc5529ec.js"><link rel="prefetch" href="/assets/js/32.2409c26f.js"><link rel="prefetch" href="/assets/js/33.fd75af8e.js"><link rel="prefetch" href="/assets/js/34.5e4cc2cf.js"><link rel="prefetch" href="/assets/js/35.582131e2.js"><link rel="prefetch" href="/assets/js/36.f8f9d17c.js"><link rel="prefetch" href="/assets/js/37.2b4c9eac.js"><link rel="prefetch" href="/assets/js/38.085d68d4.js"><link rel="prefetch" href="/assets/js/39.3cc998a3.js"><link rel="prefetch" href="/assets/js/4.e127658d.js"><link rel="prefetch" href="/assets/js/40.c77b1daa.js"><link rel="prefetch" href="/assets/js/41.1e38746f.js"><link rel="prefetch" href="/assets/js/42.2e61fde9.js"><link rel="prefetch" href="/assets/js/43.06f0b2d0.js"><link rel="prefetch" href="/assets/js/44.663ce5dd.js"><link rel="prefetch" href="/assets/js/45.71ee595d.js"><link rel="prefetch" href="/assets/js/46.5e3fa5a8.js"><link rel="prefetch" href="/assets/js/47.a7a33853.js"><link rel="prefetch" href="/assets/js/48.d0c8d023.js"><link rel="prefetch" href="/assets/js/49.3b8ecca6.js"><link rel="prefetch" href="/assets/js/5.40c63755.js"><link rel="prefetch" href="/assets/js/50.09f69916.js"><link rel="prefetch" href="/assets/js/51.5e44dcf8.js"><link rel="prefetch" href="/assets/js/52.257e2e0e.js"><link rel="prefetch" href="/assets/js/53.c93efc78.js"><link rel="prefetch" href="/assets/js/54.3eda1db7.js"><link rel="prefetch" href="/assets/js/55.42707dc2.js"><link rel="prefetch" href="/assets/js/56.a17a2891.js"><link rel="prefetch" href="/assets/js/57.a2d40006.js"><link rel="prefetch" href="/assets/js/58.be23b027.js"><link rel="prefetch" href="/assets/js/59.a8d5769f.js"><link rel="prefetch" href="/assets/js/6.7292505e.js"><link rel="prefetch" href="/assets/js/60.8068619c.js"><link rel="prefetch" href="/assets/js/61.440c7294.js"><link rel="prefetch" href="/assets/js/62.49036bf0.js"><link rel="prefetch" href="/assets/js/63.a2f8fa05.js"><link rel="prefetch" href="/assets/js/64.7d3ff294.js"><link rel="prefetch" href="/assets/js/65.2b875014.js"><link rel="prefetch" href="/assets/js/66.50b70fe8.js"><link rel="prefetch" href="/assets/js/67.1d0c01c5.js"><link rel="prefetch" href="/assets/js/68.183f985c.js"><link rel="prefetch" href="/assets/js/69.c203886a.js"><link rel="prefetch" href="/assets/js/7.938d4d3c.js"><link rel="prefetch" href="/assets/js/70.5f3a6250.js"><link rel="prefetch" href="/assets/js/71.434bcb4f.js"><link rel="prefetch" href="/assets/js/72.2d0d2b78.js"><link rel="prefetch" href="/assets/js/73.1f929c26.js"><link rel="prefetch" href="/assets/js/74.c8aaf52d.js"><link rel="prefetch" href="/assets/js/75.6698c114.js"><link rel="prefetch" href="/assets/js/76.a90e877e.js"><link rel="prefetch" href="/assets/js/77.24fec14b.js"><link rel="prefetch" href="/assets/js/78.0572de7c.js"><link rel="prefetch" href="/assets/js/79.3e667108.js"><link rel="prefetch" href="/assets/js/8.2b0b174e.js"><link rel="prefetch" href="/assets/js/80.0fc8a81e.js"><link rel="prefetch" href="/assets/js/81.a17776da.js"><link rel="prefetch" href="/assets/js/82.d722a45f.js"><link rel="prefetch" href="/assets/js/83.c2f320b7.js"><link rel="prefetch" href="/assets/js/84.851f3ff8.js"><link rel="prefetch" href="/assets/js/85.38a9ca42.js"><link rel="prefetch" href="/assets/js/86.091c6675.js"><link rel="prefetch" href="/assets/js/87.d62291f5.js"><link rel="prefetch" href="/assets/js/88.aeda687a.js"><link rel="prefetch" href="/assets/js/89.6b6e8770.js"><link rel="prefetch" href="/assets/js/9.c74f5c55.js"><link rel="prefetch" href="/assets/js/90.c07f88f4.js"><link rel="prefetch" href="/assets/js/91.9f93033c.js"><link rel="prefetch" href="/assets/js/92.69cc500f.js"><link rel="prefetch" href="/assets/js/93.2c2e2665.js"><link rel="prefetch" href="/assets/js/94.5e43cc48.js"><link rel="prefetch" href="/assets/js/95.834e9f1e.js"><link rel="prefetch" href="/assets/js/96.8da42e84.js"><link rel="prefetch" href="/assets/js/97.c3d599d9.js"><link rel="prefetch" href="/assets/js/98.2c098c97.js"><link rel="prefetch" href="/assets/js/99.6dd49321.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bf0cee12.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">海边别墅</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="海边" class="dropdown-title"><span class="title">海边</span> <span class="arrow down"></span></button> <button type="button" aria-label="海边" class="mobile-dropdown-title"><span class="title">海边</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/seaside/book/" class="nav-link">
  books
</a></li><li class="dropdown-item"><!----> <a href="/seaside/lang/" class="nav-link">
  Language
</a></li><li class="dropdown-item"><!----> <a href="/seaside/blogs/" class="nav-link">
  blogs
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="别墅" class="dropdown-title"><span class="title">别墅</span> <span class="arrow down"></span></button> <button type="button" aria-label="别墅" class="mobile-dropdown-title"><span class="title">别墅</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/villa/blogs/" class="nav-link">
  blogs
</a></li><li class="dropdown-item"><h4>
          wiki
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/villa/java/" class="nav-link router-link-active">
  Java
</a></li><li class="dropdown-subitem"><a href="/villa/spring/" class="nav-link">
  Spring
</a></li><li class="dropdown-subitem"><a href="/villa/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-subitem"><a href="/villa/go/" class="nav-link">
  Go
</a></li><li class="dropdown-subitem"><a href="/villa/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-subitem"><a href="/villa/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-subitem"><a href="/villa/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/villa/nodejs/" class="nav-link">
  NodeJs
</a></li><li class="dropdown-subitem"><a href="https://xiongjiexi.github.io/exercise_set/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  算法
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="/villa/designpattern/" class="nav-link">
  设计模式
</a></li><li class="dropdown-subitem"><a href="/villa/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-subitem"><a href="/villa/architecture/" class="nav-link">
  架构设计
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/todo/" class="nav-link">
  计划
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="About" class="dropdown-title"><span class="title">About</span> <span class="arrow down"></span></button> <button type="button" aria-label="About" class="mobile-dropdown-title"><span class="title">About</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about/me.html" class="nav-link">
  关于我
</a></li><li class="dropdown-item"><!----> <a href="/about/chain.html" class="nav-link">
  友链
</a></li><li class="dropdown-item"><!----> <a href="/about/appreciate.html" class="nav-link">
  感谢
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="海边" class="dropdown-title"><span class="title">海边</span> <span class="arrow down"></span></button> <button type="button" aria-label="海边" class="mobile-dropdown-title"><span class="title">海边</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/seaside/book/" class="nav-link">
  books
</a></li><li class="dropdown-item"><!----> <a href="/seaside/lang/" class="nav-link">
  Language
</a></li><li class="dropdown-item"><!----> <a href="/seaside/blogs/" class="nav-link">
  blogs
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="别墅" class="dropdown-title"><span class="title">别墅</span> <span class="arrow down"></span></button> <button type="button" aria-label="别墅" class="mobile-dropdown-title"><span class="title">别墅</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/villa/blogs/" class="nav-link">
  blogs
</a></li><li class="dropdown-item"><h4>
          wiki
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/villa/java/" class="nav-link router-link-active">
  Java
</a></li><li class="dropdown-subitem"><a href="/villa/spring/" class="nav-link">
  Spring
</a></li><li class="dropdown-subitem"><a href="/villa/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-subitem"><a href="/villa/go/" class="nav-link">
  Go
</a></li><li class="dropdown-subitem"><a href="/villa/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-subitem"><a href="/villa/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-subitem"><a href="/villa/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/villa/nodejs/" class="nav-link">
  NodeJs
</a></li><li class="dropdown-subitem"><a href="https://xiongjiexi.github.io/exercise_set/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  算法
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="/villa/designpattern/" class="nav-link">
  设计模式
</a></li><li class="dropdown-subitem"><a href="/villa/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-subitem"><a href="/villa/architecture/" class="nav-link">
  架构设计
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/todo/" class="nav-link">
  计划
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="About" class="dropdown-title"><span class="title">About</span> <span class="arrow down"></span></button> <button type="button" aria-label="About" class="mobile-dropdown-title"><span class="title">About</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/about/me.html" class="nav-link">
  关于我
</a></li><li class="dropdown-item"><!----> <a href="/about/chain.html" class="nav-link">
  友链
</a></li><li class="dropdown-item"><!----> <a href="/about/appreciate.html" class="nav-link">
  感谢
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Java基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/villa/java/Java基础/GC日志专题.html" class="sidebar-link">GC日志专题</a></li><li><a href="/villa/java/Java基础/JVM.html" class="active sidebar-link">JVM入门与进阶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/villa/java/Java基础/JVM.html#简介jvm" class="sidebar-link">简介JVM</a></li><li class="sidebar-sub-header"><a href="/villa/java/Java基础/JVM.html#java的核心优势" class="sidebar-link">Java的核心优势</a></li><li class="sidebar-sub-header"><a href="/villa/java/Java基础/JVM.html#java是如何运行的-简化" class="sidebar-link">Java是如何运行的（简化）</a></li><li class="sidebar-sub-header"><a href="/villa/java/Java基础/JVM.html#jvm参数的设置" class="sidebar-link">JVM参数的设置</a></li><li class="sidebar-sub-header"><a href="/villa/java/Java基础/JVM.html#jvm内存分布" class="sidebar-link">JVM内存分布</a></li><li class="sidebar-sub-header"><a href="/villa/java/Java基础/JVM.html#垃圾收集算法" class="sidebar-link">垃圾收集算法</a></li><li class="sidebar-sub-header"><a href="/villa/java/Java基础/JVM.html#hotspot的垃圾收集器-gc" class="sidebar-link">HotSpot的垃圾收集器（GC）</a></li><li class="sidebar-sub-header"><a href="/villa/java/Java基础/JVM.html#解析gc日志" class="sidebar-link">解析GC日志</a></li><li class="sidebar-sub-header"><a href="/villa/java/Java基础/JVM.html#jvm工具" class="sidebar-link">JVM工具</a></li><li class="sidebar-sub-header"><a href="/villa/java/Java基础/JVM.html#字节码文件-class文件" class="sidebar-link">字节码文件（Class文件）</a></li><li class="sidebar-sub-header"><a href="/villa/java/Java基础/JVM.html#jmm" class="sidebar-link">JMM</a></li><li class="sidebar-sub-header"><a href="/villa/java/Java基础/JVM.html#指令操作码-opcode" class="sidebar-link">指令操作码（opcode）</a></li><li class="sidebar-sub-header"><a href="/villa/java/Java基础/JVM.html#类的生命周期" class="sidebar-link">类的生命周期</a></li><li class="sidebar-sub-header"><a href="/villa/java/Java基础/JVM.html#类的加载时机" class="sidebar-link">类的加载时机</a></li><li class="sidebar-sub-header"><a href="/villa/java/Java基础/JVM.html#对象内存计算" class="sidebar-link">对象内存计算</a></li><li class="sidebar-sub-header"><a href="/villa/java/Java基础/JVM.html#q-a" class="sidebar-link">Q&amp;A</a></li><li class="sidebar-sub-header"><a href="/villa/java/Java基础/JVM.html#资料" class="sidebar-link">资料</a></li></ul></li><li><a href="/villa/java/Java基础/JVM参数.html" class="sidebar-link">JVM参数</a></li><li><a href="/villa/java/Java基础/JVM工具.html" class="sidebar-link">JVM工具</a></li><li><a href="/villa/java/Java基础/Java.html" class="sidebar-link">Java基础</a></li><li><a href="/villa/java/Java基础/JavaAPI.html" class="sidebar-link">Java API 学习</a></li><li><a href="/villa/java/Java基础/Java多线程.html" class="sidebar-link">Java多线程</a></li><li><a href="/villa/java/Java基础/Java自带的序列化.html" class="sidebar-link">Java的序列化</a></li><li><a href="/villa/java/Java%E5%9F%BA%E7%A1%80/" aria-current="page" class="sidebar-link">Summary</a></li><li><a href="/villa/java/Java基础/java源码.html" class="sidebar-link">Java源码分析</a></li><li><a href="/villa/java/Java基础/【必知必会系列】HashMap.html" class="sidebar-link">HashMap容量</a></li><li><a href="/villa/java/Java基础/【必知必会系列】Java对象的组成.html" class="sidebar-link">参考地址</a></li><li><a href="/villa/java/Java基础/彻底搞懂Java泛型.html" class="sidebar-link">泛型如何使用</a></li><li><a href="/villa/java/Java基础/把访问修饰符给你说清楚.html" class="sidebar-link">Java的修饰符</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="jvm入门与进阶"><a href="#jvm入门与进阶" class="header-anchor">#</a> JVM入门与进阶</h1> <p></p><div class="table-of-contents"><ul><li><a href="#简介jvm">简介JVM</a></li><li><a href="#java的核心优势">Java的核心优势</a></li><li><a href="#java是如何运行的-简化">Java是如何运行的（简化）</a></li><li><a href="#jvm参数的设置">JVM参数的设置</a></li><li><a href="#jvm内存分布">JVM内存分布</a></li><li><a href="#垃圾收集算法">垃圾收集算法</a><ul><li><a href="#如何判断对象需要回收">如何判断对象需要回收</a></li><li><a href="#分代收集理论">分代收集理论</a></li><li><a href="#标记-清除">标记-清除</a></li><li><a href="#标记-复制">标记-复制</a></li><li><a href="#标记-整理">标记-整理</a></li></ul></li><li><a href="#hotspot的垃圾收集器-gc">HotSpot的垃圾收集器（GC）</a><ul><li><a href="#serial收集器">Serial收集器</a></li><li><a href="#parnew收集器">ParNew收集器</a></li><li><a href="#parallel-scavenge收集器">Parallel Scavenge收集器</a></li><li><a href="#serial-old收集器">Serial Old收集器</a></li><li><a href="#parallel-old收集器">Parallel Old收集器</a></li><li><a href="#cms收集器">CMS收集器</a></li><li><a href="#g1收集器">G1收集器</a></li><li><a href="#shenandoah收集器">Shenandoah收集器</a></li><li><a href="#zgc收集器">ZGC收集器</a></li><li><a href="#epsilon收集器">Epsilon收集器</a></li></ul></li><li><a href="#解析gc日志">解析GC日志</a></li><li><a href="#jvm工具">JVM工具</a></li><li><a href="#字节码文件-class文件">字节码文件（Class文件）</a></li><li><a href="#jmm">JMM</a><ul><li><a href="#内存屏障有哪些组合">内存屏障有哪些组合？</a></li></ul></li><li><a href="#指令操作码-opcode">指令操作码（opcode）</a></li><li><a href="#类的生命周期">类的生命周期</a></li><li><a href="#类的加载时机">类的加载时机</a></li><li><a href="#对象内存计算">对象内存计算</a></li><li><a href="#q-a">Q&amp;A</a><ul><li><a href="#jvm通常会遇到哪些突如其来的棘手问题">JVM通常会遇到哪些突如其来的棘手问题？</a></li><li><a href="#字节码的偏移量多出来的位置为什么要补00">字节码的偏移量多出来的位置为什么要补00？</a></li><li><a href="#java8默认使用的gc算法是什么">java8默认使用的GC算法是什么？</a></li><li><a href="#如何切换jvm垃圾收集器">如何切换JVM垃圾收集器？</a></li><li><a href="#什么时候会发生oom-一般都是由什么导致的">什么时候会发生OOM，一般都是由什么导致的？</a></li><li><a href="#当发生oom时如何定位问题">当发生OOM时如何定位问题？</a></li><li><a href="#g1-gc的1的意思是什么-有了解过吗">G1 GC的1的意思是什么？有了解过吗？</a></li><li><a href="#如何排查cpu高-程序响应慢的问题">如何排查CPU高，程序响应慢的问题</a></li></ul></li><li><a href="#资料">资料</a></li></ul></div><p></p> <h2 id="简介jvm"><a href="#简介jvm" class="header-anchor">#</a> 简介JVM</h2> <p>一个基于栈的Java虚拟机<br>
JVM是一个任何参数都提供了默认值的虚拟机</p> <h2 id="java的核心优势"><a href="#java的核心优势" class="header-anchor">#</a> Java的核心优势</h2> <ol><li>生态完善</li> <li>非常好的跨平台语言</li> <li>有自己的虚拟机和垃圾回收器（能很好的管理内存）</li></ol> <h2 id="java是如何运行的-简化"><a href="#java是如何运行的-简化" class="header-anchor">#</a> Java是如何运行的（简化）</h2> <p>.java文件编译生成.class文件，也就是<code>Java字节码文件</code>，java运行时将字节码文件通过<code>类加载器</code>加载到jvm中并在内存中生成对象实例。</p> <h2 id="jvm参数的设置"><a href="#jvm参数的设置" class="header-anchor">#</a> JVM参数的设置</h2> <blockquote><p>《JVM参数》</p></blockquote> <h2 id="jvm内存分布"><a href="#jvm内存分布" class="header-anchor">#</a> JVM内存分布</h2> <p><img src="/assets/img/jdk6内存划分.b3504ba7.png" alt="jdk6内存划分"></p> <h2 id="垃圾收集算法"><a href="#垃圾收集算法" class="header-anchor">#</a> 垃圾收集算法</h2> <h3 id="如何判断对象需要回收"><a href="#如何判断对象需要回收" class="header-anchor">#</a> 如何判断对象需要回收</h3> <h3 id="分代收集理论"><a href="#分代收集理论" class="header-anchor">#</a> 分代收集理论</h3> <h3 id="标记-清除"><a href="#标记-清除" class="header-anchor">#</a> 标记-清除</h3> <h3 id="标记-复制"><a href="#标记-复制" class="header-anchor">#</a> 标记-复制</h3> <h3 id="标记-整理"><a href="#标记-整理" class="header-anchor">#</a> 标记-整理</h3> <h2 id="hotspot的垃圾收集器-gc"><a href="#hotspot的垃圾收集器-gc" class="header-anchor">#</a> HotSpot的垃圾收集器（GC）</h2> <p>以下是7种HotSpot GC的搭配关系图：</p> <p>有不需要STW的垃圾收集器吗？</p> <p>通常用哪些指标衡量垃圾收集器？</p> <h3 id="serial收集器"><a href="#serial收集器" class="header-anchor">#</a> Serial收集器</h3> <p>工作机制是什么（什么算法实现、和其他收集器的组合有什么）？是指单线程吗？单线程是垃圾收集线程只有一个吗？</p> <p>现在还有使用它的场景吗？</p> <p>觉得它基本没有使用的场景，那你说下它的优缺点吧。</p> <h3 id="parnew收集器"><a href="#parnew收集器" class="header-anchor">#</a> ParNew收集器</h3> <p>工作机制？什么算法实现？</p> <p>什么时候使用？</p> <p>与Serial收集器相比如何？</p> <h3 id="parallel-scavenge收集器"><a href="#parallel-scavenge收集器" class="header-anchor">#</a> Parallel Scavenge收集器</h3> <p>工作机制及算法实现是什么？</p> <p>与ParNew的区别是什么？</p> <p>为什么它常被称作“吞吐量优先收集器”？</p> <p>使用它常设置哪些JVM参数？</p> <h3 id="serial-old收集器"><a href="#serial-old收集器" class="header-anchor">#</a> Serial Old收集器</h3> <p>工作机制和内容分别是什么？</p> <h3 id="parallel-old收集器"><a href="#parallel-old收集器" class="header-anchor">#</a> Parallel Old收集器</h3> <p>工作机制和内容分别是什么？</p> <p>怎么组合使用？</p> <h3 id="cms收集器"><a href="#cms收集器" class="header-anchor">#</a> CMS收集器</h3> <p>工作机制是什么？（有四个步骤，你知道是哪些吗？）</p> <p>什么时候会触发STW？什么时候不需要STW？</p> <p>它有哪些优缺点？</p> <p>JDK9已经不推荐使用CMS收集器了。</p> <h3 id="g1收集器"><a href="#g1收集器" class="header-anchor">#</a> G1收集器</h3> <p>JDK9发布之后，G1取代Parallel Scavenge+Parallel Old组合，成为服务端模式下默认收集器。</p> <p>G1 GC是启发式算法，会动态调整年轻代的空间大小。目标也就是为了达到接近预期的暂停时间。G1提供了两种GC模式，Young GC和Mixed GC，两种都是Stop The World(STW)的。</p> <h4 id="g1的结构"><a href="#g1的结构" class="header-anchor">#</a> G1的结构</h4> <p>G1抛弃了之前的分代收集的方式，面向整个堆内存进行回收，把内存划分为多个大小相等的独立区域Region。</p> <p>一共有4种Region：</p> <ol><li>自由分区Free Region</li> <li>年轻代分区Young Region，年轻代还是会存在Eden和Survivor的区分</li> <li>老年代分区Old Region</li> <li>大对象分区Humongous Region</li></ol> <p>每个Region的大小通过<code>-XX:G1HeapRegionSize</code>来设置，大小为1~32MB，默认最多可以有2048个Region，那么按照默认值计算G1能管理的最大内存就是32MB*2048=64G。</p> <p>对于大对象的存储，存在Humongous概念，对G1来说，超过一个Region一半大小的对象都被认为大对象，将会被放入Humongous Region，而对于超过整个Region的大对象，则用几个连续的Humongous来存储。</p> <h4 id="g1的优点"><a href="#g1的优点" class="header-anchor">#</a> G1的优点</h4> <p>垃圾收集器的目的是减少STW造成的停顿。</p> <p>G1最大的优势是<strong>可预测的停顿时间模型</strong>，通过参数<code>-XX:MaxGCPauseMillis</code>设置（默认200ms）。</p> <p>G1会收集每个Region的回收之后的空间大小、回收需要的时间，根据评估得到的价值，维护一个优先级列表，基于我们设置的停顿时间，优先回收价值收益最大的Region。</p> <h4 id="g1步骤"><a href="#g1步骤" class="header-anchor">#</a> G1步骤</h4> <ol><li>初始标记：标记GC Roots能关联到的对象</li> <li>并发标记：从GC Roots直接关联的对象开始遍历整个对象图</li> <li>最终标记：暂停用户线程，再处理一次</li> <li>筛选回收：更新Region的统计数据，根据用户设置的停顿时间制定回收计划，把需要回收的Region中存活的对象复制到空的Region，清理旧的Region</li></ol> <p>以上只有第二步并发标记不需要STW。</p> <h4 id="记忆集"><a href="#记忆集" class="header-anchor">#</a> 记忆集</h4> <p>G1的记忆集相对复杂，每个Region中都存在一个Hash Table结构的记忆集，Key为其他Region的起始地址，Value是其他Card Table卡表的索引集合。</p> <p>维护记忆集的方式也是<code>写屏障</code>。</p> <h4 id="并发标记对象消失"><a href="#并发标记对象消失" class="header-anchor">#</a> 并发标记对象消失</h4> <p>G1使用<code>原始快照</code>的方式解决并发标记的对象消失问题。</p> <h4 id="g1的参数"><a href="#g1的参数" class="header-anchor">#</a> G1的参数</h4> <h5 id="xx-maxgcpausemillis"><a href="#xx-maxgcpausemillis" class="header-anchor">#</a> -XX:MaxGCPauseMillis</h5> <p>暂停时间，默认值200ms。这是一个软性目标，G1会尽量达成，如果达不成，会逐渐做自我调整。</p> <p>对于Young GC来说，会逐渐减少Eden区个数，减少Eden空间那么Young GC的处理时间就会相应减少。对于Mixed GC，G1会调整每次Choose Cset的比例，默认最大值是10%，当然每次选择的Cset少了，所要经历的Mixed GC的次数会相应增加。</p> <p>减少Eden的总空间时，就会更加频繁的触发Young GC，也就是会加快Mixed GC的执行频率，因为Mixed GC是由Young GC触发的，或者说借机同时执行的。频繁GC会对对应用的吞吐量造成影响，每次Mixed GC回收时间太短，回收的垃圾量太少，可能最后GC的垃圾清理速度赶不上应用产生的速度，那么可能会造成串行的Full GC，这是要极力避免的。所以暂停时间肯定不是设置的越小越好，当然也不能设置的偏大，转而指望G1自己会尽快的处理，这样可能会导致一次全部并发标记后触发的Mixed GC次数变少，但每次的时间变长，STW时间变长，对应用的影响更加明显。</p> <h5 id="xx-g1heapregionsize"><a href="#xx-g1heapregionsize" class="header-anchor">#</a> -XX:G1HeapRegionSize</h5> <p>Region大小，若未指定则默认最多生成2048块，每块的大小需要为2的幂次方，如1,2,4,8,16,32，最大值为32M。Region的大小主要是关系到Humongous Object的判定，当一个对象超过Region大小的一半时，则为巨型对象，那么其会至少独占一个Region，如果一个放不下，会占用连续的多个Region。当一个Humongous Region放入了一个巨型对象，可能还有不少剩余空间，但是不能用于存放其他对象，这些空间就浪费了。所以如果应用里有很多大小差不多的巨型对象，可以适当调整Region的大小，尽量让他们以普通对象的形式分配，合理利用Region空间。</p> <h5 id="xx-g1newsizepercent和-xx-g1maxnewsizepercent"><a href="#xx-g1newsizepercent和-xx-g1maxnewsizepercent" class="header-anchor">#</a> -XX:G1NewSizePercent和-XX:G1MaxNewSizePercent</h5> <p>新生代比例有两个数值指定，下限：-XX:G1NewSizePercent，默认值5%，上限：-XX:G1MaxNewSizePercent，默认值60%。G1会根据实际的GC情况(主要是暂停时间)来动态的调整新生代的大小，主要是Eden Region的个数。最好是Eden的空间大一点，毕竟Young GC的频率更大，大的Eden空间能够降低Young GC的发生次数。但是Mixed GC是伴随着Young GC一起的，如果暂停时间短，那么需要更加频繁的Young GC，同时也需要平衡好Mixed GC中新生代和老年代的Region，因为新生代的所有Region都会被回收，如果Eden很大，那么留给老年代回收空间就不多了，最后可能会导致Full GC。</p> <h5 id="xx-concgcthreads"><a href="#xx-concgcthreads" class="header-anchor">#</a> -XX:ConcGCThreads</h5> <p>通过 -XX:ConcGCThreads来指定并发GC线程数，默认是-XX:ParallelGCThreads/4，也就是在非STW期间的GC工作线程数，当然其他的线程很多工作在应用上。当并发周期时间过长时，可以尝试调大GC工作线程数，但是这也意味着此期间应用所占的线程数减少，会对吞吐量有一定影响。</p> <div class="language- extra-class"><pre class="language-text"><code>ConcGCThreads = (3 + ParallelGCThreads) / 4
</code></pre></div><h5 id="xx-parallelgcthreads"><a href="#xx-parallelgcthreads" class="header-anchor">#</a> -XX:ParallelGCThreads</h5> <p>通过-XX:ParallelGCThreads来指定并行GC线程数，也就是在STW阶段工作的GC线程数，其值遵循以下原则：</p> <p>如果用户显示指定了ParallelGCThreads，则使用用户指定的值。否则需要根据实际的CPU所能够支持的线程数来计算ParallelGCThreads的值。如果物理CPU所能够支持线程数小于8，则ParallelGCThreads的值为CPU所支持的线程数。这里的阀值为8，是因为JVM中调用nof_parallel_worker_threads接口所传入的switch_pt的值均为8。如果物理CPU所能够支持线程数大于8，则ParallelGCThreads的值为8加上一个调整值，调整值的计算方式为：物理CPU所支持的线程数减去8所得值的5/8或者5/16，JVM会根据实际的情况来选择具体是乘以5/8还是5/16。ParallelGCThreads= 8 + (N - 8) * 5 / 8 比如，在64线程的x86 CPU上，如果用户未指定ParallelGCThreads的值，则默认的计算方式为：ParallelGCThreads = 8 + (64 - 8) * (5/8) = 8 + 35 = 43。</p> <h5 id="xx-g1mixedgclivethresholdpercent"><a href="#xx-g1mixedgclivethresholdpercent" class="header-anchor">#</a> -XX:G1MixedGCLiveThresholdPercent</h5> <p>通过这个参数指定被纳入Cset的Region的存活空间占比阈值，不同版本默认值不同，有65%和85%。在全局并发标记阶段，如果一个Region的存活对象的空间占比低于此值，则会被纳入Cset。此值直接影响到Mixed GC选择回收的区域，当发现GC时间较长时，可以尝试调低此阈值，尽量优先选择回收垃圾占比高的Region，但此举也可能导致垃圾回收的不够彻底，最终触发Full GC。</p> <h5 id="xx-initiatingheapoccupancypercent"><a href="#xx-initiatingheapoccupancypercent" class="header-anchor">#</a> -XX:InitiatingHeapOccupancyPercent</h5> <p>通过这个参数指定触发全局并发标记的老年代使用占比，默认值45%，也就是老年代占堆的比例超过45%。如果Mixed GC周期结束后老年代使用率还是超过45%,那么会再次触发全局并发标记过程，这样就会导致频繁的老年代GC，影响应用吞吐量。同时老年代空间不大，Mixed GC回收的空间肯定是偏少的。可以适当调高IHOP的值，当然如果此值太高，很容易导致年轻代晋升失败而触发Full GC，所以需要多次调整测试。</p> <h5 id="xx-g1heapwastepercent"><a href="#xx-g1heapwastepercent" class="header-anchor">#</a> -XX:G1HeapWastePercent</h5> <p>通过这个参数指定触发Mixed GC的堆垃圾占比，默认值5%，也就是在全局标记结束后能够统计出所有Cset内可被回收的垃圾占整对的比例值，如果超过5%，那么就会触发之后的多轮Mixed GC，如果不超过，那么会在之后的某次Young GC中重新执行全局并发标记。可以尝试适当的调高此阈值，能够适当的降低Mixed GC的频率。</p> <h5 id="xx-g1oldcsetregionthresholdpercent"><a href="#xx-g1oldcsetregionthresholdpercent" class="header-anchor">#</a> -XX:G1OldCSetRegionThresholdPercent</h5> <p>通过这个参数指定每轮Mixed GC回收的Region最大比例，默认10%，也就是每轮Mixed GC附加的Cset的Region不超过全部Region的10%，最多10%，如果暂停时间短，那么可能会少于10%。一般这个值不需要额外调整。</p> <h5 id="xx-g1mixedgccounttarget"><a href="#xx-g1mixedgccounttarget" class="header-anchor">#</a> -XX:G1MixedGCCountTarget</h5> <p>通过这个参数指定一个周期内触发Mixed GC最大次数，默认值8。一次全局并发标记后，最多接着8次Mixed GC，把全局并发标记阶段生成的Cset里的Region拆分为最多8部分，然后在每轮Mixed GC里收集一部分。这个值要和上一个参数配合使用，8*10%=80%，应该来说会大于每次标记阶段的Cset集合了。一般此参数也不需额外调整。</p> <h5 id="xx-g1reservepercent"><a href="#xx-g1reservepercent" class="header-anchor">#</a> -XX:G1ReservePercent</h5> <p>通过这个参数指定G1为分配担保预留的空间比例，默认10%。也就是老年代会预留10%的空间来给新生代的对象晋升，如果经常发生新生代晋升失败而导致Full GC，那么可以适当调高此阈值。但是调高此值同时也意味着降低了老年代的实际可用空间。</p> <h5 id="xx-maxtenuringthreshold"><a href="#xx-maxtenuringthreshold" class="header-anchor">#</a> -XX:MaxTenuringThreshold</h5> <p>晋升年龄阈值，默认值15。一般新生对象经过15次Young GC会晋升到老年代，巨型对象会直接分配在老年代，同时在Young GC时，如果相同age的对象占Survivors空间的比例超过 -XX:TargetSurvivorRatio的值(默认50%)，则会自动将此次晋升年龄阈值设置为此age的值，所有年龄超过此值的对象都会被晋升到老年代，此举可能会导致老年代需要不少空间应对此种晋升。一般这个值不需要额外调整。</p> <h4 id="调优建议"><a href="#调优建议" class="header-anchor">#</a> 调优建议</h4> <p>不要手动设置新生代和老年代的大小，只设置这个堆的大小 G1收集器在运行过程中，会自己调整新生代和老年代的大小 其实是通过adapt代的大小来调整对象晋升的速度和年龄，从而达到为收集器设置的暂停时间目标, 如果手动设置了大小就意味着放弃了G1的自动调优。</p> <p>不断调优暂停时间目标<code>-XX:MaxGCPauseMillis</code>，一般情况下这个值设置到100ms或者200ms， 暂停时间设置的太短，就会导致出现G1跟不上垃圾产生的速度。最终退化成Full GC。所以对这个参数的调优是一个持续的过程，逐步调整到最佳状态。暂停时间只是一个目标，并不能总是得到满足。</p> <h3 id="shenandoah收集器"><a href="#shenandoah收集器" class="header-anchor">#</a> Shenandoah收集器</h3> <h3 id="zgc收集器"><a href="#zgc收集器" class="header-anchor">#</a> ZGC收集器</h3> <h3 id="epsilon收集器"><a href="#epsilon收集器" class="header-anchor">#</a> Epsilon收集器</h3> <h2 id="解析gc日志"><a href="#解析gc日志" class="header-anchor">#</a> 解析GC日志</h2> <blockquote><p>《GC日志专题》</p></blockquote> <h2 id="jvm工具"><a href="#jvm工具" class="header-anchor">#</a> JVM工具</h2> <blockquote><p>《JVM工具》</p></blockquote> <h2 id="字节码文件-class文件"><a href="#字节码文件-class文件" class="header-anchor">#</a> 字节码文件（Class文件）</h2> <blockquote><p>《字节码Class文件》</p></blockquote> <h2 id="jmm"><a href="#jmm" class="header-anchor">#</a> JMM</h2> <p>JMM是什么？与JVM的关系是什么？介绍下JMM。
JMM中定义了哪些Action？
把变量从主内存复制到工作内存需要执行哪些action？
把变量从工作内存同步回主内存需要执行哪些action？
JMM的三大特性？
JMM提供的happends-before规则是什么？
happends-before是依靠什么来保障的呢？</p> <p>你可以认为JMM是JVM 的数据存储模型，它是一个抽象的概念。
JMM分为主存储器（Main Memory）和工作存储器（Working Memory）。
主存储器是实例位置所在的区域，所有的实例都存在于主存储器内。比如，实例所拥有的字段即位于主存储器内，主存储器是所有的线程所共享的。
工作存储器是线程所拥有的作业区，每个线程都有其专用的工作存储器。工作存储器存有主存储器中必要部分的拷贝，称之为工作拷贝（Working Copy）。
在JMM中，线程无法对主存储器直接进行操作。
如果你非要将这两存储器对应到内存中的区域，可以这样看，主存通常是Java堆（其实也可能是高速缓存或CPU寄存器），工作内存对应虚拟机栈（也可能是硬件内存），不用太纠结位置。
JMM中定义了8个Action：
1.read（读取）
2.load（载入）
3.store（存储）
4.write（写入）
5.use（使用）
6.assign（赋值）
7.lock（锁定）
8.unlock（解锁）
把一个变量从主内存复制到工作内存中，需要顺序执行read和load，把变量从工作内存同步回主内存，需要顺序执行store和write操作。
JMM的三大特性：1.原子性 2.可见性 3.有序性
JMM提供的happends-before规则：
1.程序次序
2.监视器锁定
3.volatile
4.传递规则
5.线程启动
6.线程中断
7.线程终结规则
8.对象终结规则
happends-before是依靠什么来保障的呢：内存屏障。</p> <h3 id="内存屏障有哪些组合"><a href="#内存屏障有哪些组合" class="header-anchor">#</a> 内存屏障有哪些组合？</h3> <ol><li>Load-Load Barriers</li> <li>Load-Store Barriers</li> <li>Store-Store Barriers</li> <li>Store-Load Barriers</li></ol> <h2 id="指令操作码-opcode"><a href="#指令操作码-opcode" class="header-anchor">#</a> 指令操作码（opcode）</h2> <p>根据指令的性质，最多分为四个大类：</p> <h2 id="类的生命周期"><a href="#类的生命周期" class="header-anchor">#</a> 类的生命周期</h2> <h2 id="类的加载时机"><a href="#类的加载时机" class="header-anchor">#</a> 类的加载时机</h2> <h2 id="对象内存计算"><a href="#对象内存计算" class="header-anchor">#</a> 对象内存计算</h2> <p><a href="https://cloud.tencent.com/developer/article/1552089" target="_blank" rel="noopener noreferrer">参考地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="q-a"><a href="#q-a" class="header-anchor">#</a> Q&amp;A</h2> <h3 id="jvm通常会遇到哪些突如其来的棘手问题"><a href="#jvm通常会遇到哪些突如其来的棘手问题" class="header-anchor">#</a> JVM通常会遇到哪些突如其来的棘手问题？</h3> <p>1.GC时间过长
2.发生OOM</p> <h3 id="字节码的偏移量多出来的位置为什么要补00"><a href="#字节码的偏移量多出来的位置为什么要补00" class="header-anchor">#</a> 字节码的偏移量多出来的位置为什么要补00？</h3> <h3 id="java8默认使用的gc算法是什么"><a href="#java8默认使用的gc算法是什么" class="header-anchor">#</a> java8默认使用的GC算法是什么？</h3> <h3 id="如何切换jvm垃圾收集器"><a href="#如何切换jvm垃圾收集器" class="header-anchor">#</a> 如何切换JVM垃圾收集器？</h3> <h3 id="什么时候会发生oom-一般都是由什么导致的"><a href="#什么时候会发生oom-一般都是由什么导致的" class="header-anchor">#</a> 什么时候会发生OOM，一般都是由什么导致的？</h3> <h3 id="当发生oom时如何定位问题"><a href="#当发生oom时如何定位问题" class="header-anchor">#</a> 当发生OOM时如何定位问题？</h3> <p><strong>使用MAT定位</strong></p> <p><a href="https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&amp;mid=2247540688&amp;idx=3&amp;sn=39292d0d8a18905ed760e29df1f2c4cf&amp;chksm=fa4a2061cd3da9774c8f3c405a4c3c7a1795202f93b0a271f11bcbad77794df9bd21ad8244ff&amp;scene=27#wechat_redirect" target="_blank" rel="noopener noreferrer">使用 MAT 分析 OOM 问题<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ol><li>生产环境一般要配置OOM堆转储的JVM参数
<blockquote><p>-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=.</p></blockquote></li></ol> <h3 id="g1-gc的1的意思是什么-有了解过吗"><a href="#g1-gc的1的意思是什么-有了解过吗" class="header-anchor">#</a> G1 GC的1的意思是什么？有了解过吗？</h3> <h3 id="如何排查cpu高-程序响应慢的问题"><a href="#如何排查cpu高-程序响应慢的问题" class="header-anchor">#</a> 如何排查CPU高，程序响应慢的问题</h3> <ol><li>top命令获取占用CPU最高的程序PID
<blockquote><p>$ top</p></blockquote></li> <li>找到此进程中消耗CPU较高的线程ID
<blockquote><p>$ top -Hp {pid}
可以根据top命令显示的TIME+列（消耗CPU时间），找到消耗时间最长的线程ID</p></blockquote></li> <li>将线程ID转换为16进制
<blockquote><p>$ printf &quot;%x\n&quot; {pid}</p></blockquote></li> <li>使用jstack打印堆栈信息，可以在log文件中搜索到nid（本地线程标识）的16进制，定位代码问题即可。
<blockquote><p>$ jstack -l {pid} &gt; stack.log</p></blockquote></li></ol> <h2 id="资料"><a href="#资料" class="header-anchor">#</a> 资料</h2> <ul><li><p><a href="https://github.com/cncounter/translation/blob/master/tiemao_2020/41_invoke_opcode/README.md" target="_blank" rel="noopener noreferrer">深入JVM - 实例详解invoke相关操作码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://www.infoq.cn/article/java-memory-model-1" target="_blank" rel="noopener noreferrer">深入理解 Java 内存模型（一）——基础<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">修改于:</span> <span class="time">7/8/2022, 12:18:54 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/villa/java/Java基础/GC日志专题.html" class="prev">
        GC日志专题
      </a></span> <span class="next"><a href="/villa/java/Java基础/JVM参数.html">
        JVM参数
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.fc976789.js" defer></script><script src="/assets/js/3.5332180f.js" defer></script><script src="/assets/js/2.2c3855b5.js" defer></script><script src="/assets/js/25.9a8e54ce.js" defer></script>
  </body>
</html>
